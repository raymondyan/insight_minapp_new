/**
 * 特殊字符映射表
 * @type {Object}
 */
const codeMap = {
  // HTML 支持的数学符号
  '&forall;': '∀',
  '&part;': '∂',
  '&exists;': '∃',
  '&empty;': '∅',
  '&nabla;': '∇',
  '&isin;': '∈',
  '&notin;': '∉',
  '&ni;': '∋',
  '&prod;': '∏',
  '&sum;': '∑',
  '&minus;': '−',
  '&lowast;': '∗',
  '&radic;': '√',
  '&prop;': '∝',
  '&infin;': '∞',
  '&ang;': '∠',
  '&and;': '∧',
  '&or;': '∨',
  '&cap;': '∩',
  '&cap;': '∪',
  '&int;': '∫',
  '&there4;': '∴',
  '&sim;': '∼',
  '&cong;': '≅',
  '&asymp;': '≈',
  '&ne;': '≠',
  '&le;': '≤',
  '&ge;': '≥',
  '&sub;': '⊂',
  '&sup;': '⊃',
  '&nsub;': '⊄',
  '&sube;': '⊆',
  '&supe;': '⊇',
  '&oplus;': '⊕',
  '&otimes;': '⊗',
  '&perp;': '⊥',
  '&sdot;': '⋅',

  // HTML 支持的希腊字母
  '&Alpha;': 'Α',
  '&Beta;': 'Β',
  '&Gamma;': 'Γ',
  '&Delta;': 'Δ',
  '&Epsilon;': 'Ε',
  '&Zeta;': 'Ζ',
  '&Eta;': 'Η',
  '&Theta;': 'Θ',
  '&Iota;': 'Ι',
  '&Kappa;': 'Κ',
  '&Lambda;': 'Λ',
  '&Mu;': 'Μ',
  '&Nu;': 'Ν',
  '&Xi;': 'Ν',
  '&Omicron;': 'Ο',
  '&Pi;': 'Π',
  '&Rho;': 'Ρ',
  '&Sigma;': 'Σ',
  '&Tau;': 'Τ',
  '&Upsilon;': 'Υ',
  '&Phi;': 'Φ',
  '&Chi;': 'Χ',
  '&Psi;': 'Ψ',
  '&Omega;': 'Ω',
  '&alpha;': 'α',
  '&beta;': 'β',
  '&gamma;': 'γ',
  '&delta;': 'δ',
  '&epsilon;': 'ε',
  '&zeta;': 'ζ',
  '&eta;': 'η',
  '&theta;': 'θ',
  '&iota;': 'ι',
  '&kappa;': 'κ',
  '&lambda;': 'λ',
  '&mu;': 'μ',
  '&nu;': 'ν',
  '&xi;': 'ξ',
  '&omicron;': 'ο',
  '&pi;': 'π',
  '&rho;': 'ρ',
  '&sigmaf;': 'ς',
  '&sigma;': 'σ',
  '&tau;': 'τ',
  '&upsilon;': 'υ',
  '&phi;': 'φ',
  '&chi;': 'χ',
  '&psi;': 'ψ',
  '&omega;': 'ω',
  '&thetasym;': 'ϑ',
  '&upsih;': 'ϒ',
  '&piv;': 'ϖ',
  '&middot;': '·',

  // 常用解析
  '&nbsp;': ' ',
  '&quot;': "'",
  '&amp;': '&',
  '&#32;': ' ',
  '&#33;': '!',
  '&#34;': '"',
  '&#35;': '#',
  '&#36;': '$',
  '&#37;': '%',
  '&#38;': '&',
  '&#39;': "'",
  '&#40;': '(',
  '&#41;': ')',
  '&#42;': '*',
  '&#43;': '+',
  '&#44;': ',  ',
  '&#45;': '-',
  '&#46;': '.',
  '&#47;': '/',
  '&#48;': '0',
  '&#49;': '1',
  '&#50;': '2',
  '&#51;': '3',
  '&#52;': '4',
  '&#53;': '5',
  '&#54;': '6',
  '&#55;': '7',
  '&#56;': '8',
  '&#57;': '9',
  '&#58;': ':',
  '&#59;': ';',
  '&#60;': '<',
  '&#61;': '=',
  '&#62;': '>',
  '&#63;': '?',
  '&#64;': '@',
  '&#65;': 'A',
  '&#66;': 'B',
  '&#67;': 'C',
  '&#68;': 'D',
  '&#69;': 'E',
  '&#70;': 'F',
  '&#71;': 'G',
  '&#72;': 'H',
  '&#73;': 'I',
  '&#74;': 'J',
  '&#75;': 'K',
  '&#76;': 'L',
  '&#77;': 'M',
  '&#78;': 'N',
  '&#79;': 'O',
  '&#80;': 'P',
  '&#81;': 'Q',
  '&#82;': 'R',
  '&#83;': 'S',
  '&#84;': 'T',
  '&#85;': 'U',
  '&#86;': 'V',
  '&#87;': 'W',
  '&#88;': 'X',
  '&#89;': 'Y',
  '&#90;': 'Z',
  '&#91;': '[',
  '&#92;': '\\',
  '&#93;': ']',
  '&#94;': '^',
  '&#95;': '_',
  '&#96;': '`',
  '&#97;': 'a',
  '&#98;': 'b',
  '&#99;': 'c',
  '&#100;': 'd',
  '&#101;': 'e',
  '&#102;': 'f',
  '&#103;': 'g',
  '&#104;': 'h',
  '&#105;': 'i',
  '&#106;': 'j',
  '&#107;': 'k',
  '&#108;': 'l',
  '&#109;': 'm',
  '&#110;': 'n',
  '&#111;': 'o',
  '&#112;': 'p',
  '&#113;': 'q',
  '&#114;': 'r',
  '&#115;': 's',
  '&#116;': 't',
  '&#117;': 'u',
  '&#118;': 'v',
  '&#119;': 'w',
  '&#120;': 'x',
  '&#121;': 'y',
  '&#122;': 'z',
  '&#123;': '{',
  '&#124;': '|',
  '&#125;': '}',
  '&#126;': '~',
  '&#192;': 'À',
  '&#193;': 'Á',
  '&#194;': 'Â',
  '&#195;': 'Ã',
  '&#196;': 'Ä',
  '&#197;': 'Å',
  '&#198;': 'Æ',
  '&#199;': 'Ç',
  '&#200;': 'È',
  '&#201;': 'É',
  '&#202;': 'Ê',
  '&#203;': 'Ë',
  '&#204;': 'Ì',
  '&#205;': 'Í',
  '&#206;': 'Î',
  '&#207;': 'Ï',
  '&#208;': 'Ð',
  '&#209;': 'Ñ',
  '&#210;': 'Ò',
  '&#211;': 'Ó',
  '&#212;': 'Ô',
  '&#213;': 'Õ',
  '&#214;': 'Ö',
  '&#216;': 'Ø',
  '&#217;': 'Ù',
  '&#218;': 'Ú',
  '&#219;': 'Û',
  '&#220;': 'Ü',
  '&#221;': 'Ý',
  '&#222;': 'Þ',
  '&#223;': 'ß',
  '&#224;': 'à',
  '&#225;': 'á',
  '&#226;': 'â',
  '&#227;': 'ã',
  '&#228;': 'ä',
  '&#229;': 'å',
  '&#230;': 'æ',
  '&#231;': 'ç',
  '&#232;': 'è',
  '&#233;': 'é',
  '&#234;': 'ê',
  '&#235;': 'ë',
  '&#236;': 'ì',
  '&#237;': 'í',
  '&#238;': 'î',
  '&#239;': 'ï',
  '&#240;': 'ð',
  '&#241;': 'ñ',
  '&#242;': 'ò',
  '&#243;': 'ó',
  '&#244;': 'ô',
  '&#245;': 'õ',
  '&#246;': 'ö',
  '&#248;': 'ø',
  '&#249;': 'ù',
  '&#250;': 'ú',
  '&#251;': 'û',
  '&#252;': 'ü',
  '&#253;': 'ý',
  '&#254;': 'þ',
  '&#255;': 'ÿ',
  '&#160;': ' ',
  '&#161;': '¡',
  '&#162;': '¢',
  '&#163;': '£',
  '&#164;': '¤',
  '&#165;': '¥',
  '&#166;': '¦',
  '&#167;': '§',
  '&#168;': '¨',
  '&#169;': '©',
  '&#170;': 'ª',
  '&#171;': '«',
  '&#172;': '¬',
  '&#173;': '\xad',
  '&#174;': '®',
  '&#175;': '¯',
  '&#176;': '°',
  '&#177;': '±',
  '&#178;': '²',
  '&#179;': '³',
  '&#180;': '´',
  '&#181;': 'µ',
  '&#182;': '¶',
  '&#184;': '¸',
  '&#185;': '¹',
  '&#186;': 'º',
  '&#187;': '»',
  '&#188;': '¼',
  '&#189;': '½',
  '&#190;': '¾',
  '&#191;': '¿',
  '&#215;': '×',
  '&#247;': '÷',
  '&#8704;': '∀',
  '&#8706;': '∂',
  '&#8707;': '∃',
  '&#8709;': '∅',
  '&#8711;': '∇',
  '&#8712;': '∈',
  '&#8713;': '∉',
  '&#8715;': '∋',
  '&#8719;': '∏',
  '&#8721;': '∑',
  '&#8722;': '−',
  '&#8727;': '∗',
  '&#8730;': '√',
  '&#8733;': '∝',
  '&#8734;': '∞',
  '&#8736;': '∠',
  '&#8743;': '∧',
  '&#8744;': '∨',
  '&#8745;': '∩',
  '&#8746;': '∪',
  '&#8747;': '∫',
  '&#8756;': '∴',
  '&#8764;': '∼',
  '&#8773;': '≅',
  '&#8776;': '≈',
  '&#8800;': '≠',
  '&#8801;': '≡',
  '&#8804;': '≤',
  '&#8805;': '≥',
  '&#8834;': '⊂',
  '&#8835;': '⊃',
  '&#8836;': '⊄',
  '&#8838;': '⊆',
  '&#8839;': '⊇',
  '&#8853;': '⊕',
  '&#8855;': '⊗',
  '&#8869;': '⊥',
  '&#8901;': '⋅',
  '&#913;': 'Α',
  '&#914;': 'Β',
  '&#915;': 'Γ',
  '&#916;': 'Δ',
  '&#917;': 'Ε',
  '&#918;': 'Ζ',
  '&#919;': 'Η',
  '&#920;': 'Θ',
  '&#921;': 'Ι',
  '&#922;': 'Κ',
  '&#923;': 'Λ',
  '&#924;': 'Μ',
  '&#925;': 'Ν',
  '&#926;': 'Ξ',
  '&#927;': 'Ο',
  '&#928;': 'Π',
  '&#929;': 'Ρ',
  '&#931;': 'Σ',
  '&#932;': 'Τ',
  '&#933;': 'Υ',
  '&#934;': 'Φ',
  '&#935;': 'Χ',
  '&#936;': 'Ψ',
  '&#937;': 'Ω',
  '&#945;': 'α',
  '&#946;': 'β',
  '&#947;': 'γ',
  '&#948;': 'δ',
  '&#949;': 'ε',
  '&#950;': 'ζ',
  '&#951;': 'η',
  '&#952;': 'θ',
  '&#953;': 'ι',
  '&#954;': 'κ',
  '&#955;': 'λ',
  '&#956;': 'μ',
  '&#957;': 'ν',
  '&#958;': 'ξ',
  '&#959;': 'ο',
  '&#960;': 'π',
  '&#961;': 'ρ',
  '&#962;': 'ς',
  '&#963;': 'σ',
  '&#964;': 'τ',
  '&#965;': 'υ',
  '&#966;': 'φ',
  '&#967;': 'χ',
  '&#968;': 'ψ',
  '&#969;': 'ω',
  '&#977;': 'ϑ',
  '&#978;': 'ϒ',
  '&#982;': 'ϖ',
  '&#338;': 'Œ',
  '&#339;': 'œ',
  '&#352;': 'Š',
  '&#353;': 'š',
  '&#376;': 'Ÿ',
  '&#402;': 'ƒ',
  '&#710;': 'ˆ',
  '&#732;': '˜',
  '&#8194;': '\u2002',
  '&#8195;': '\u2003',
  '&#8201;': '\u2009',
  '&#8204;': '\u200c',
  '&#8205;': '\u200d',
  '&#8206;': '\u200e',
  '&#8207;': '\u200f',
  '&#8211;': '–',
  '&#8212;': '—',
  '&#8216;': '‘',
  '&#8217;': '’',
  '&#8218;': '‚',
  '&#8220;': '“',
  '&#8221;': '”',
  '&#8222;': '„',
  '&#8224;': '†',
  '&#8225;': '‡',
  '&#8226;': '•',
  '&#8230;': '…',
  '&#8240;': '‰',
  '&#8242;': '′',
  '&#8243;': '″',
  '&#8249;': '‹',
  '&#8250;': '›',
  '&#8254;': '‾',
  '&#8364;': '€',
  '&#8482;': '™',
  '&#8592;': '←',
  '&#8593;': '↑',
  '&#8594;': '→',
  '&#8595;': '↓',
  '&#8596;': '↔',
  '&#8629;': '↵',
  '&#8968;': '⌈',
  '&#8969;': '⌉',
  '&#8970;': '⌊',
  '&#8971;': '⌋',
  '&#9674;': '◊',
  '&#9824;': '♠',
  '&#9827;': '♣',
  '&#9829;': '♥',
  '&#9830;': '♦',

  // HTML 支持的其他实体
  '&OElig;': 'Œ',
  '&oelig;': 'œ',
  '&Scaron;': 'Š',
  '&scaron;': 'š',
  '&Yuml;': 'Ÿ',
  '&fnof;': 'ƒ',
  '&circ;': 'ˆ',
  '&tilde;': '˜',
  '&ensp;': '',
  '&emsp;': '',
  '&thinsp;': '',
  '&zwnj;': '',
  '&zwj;': '',
  '&lrm;': '',
  '&rlm;': '',
  '&ndash;': '–',
  '&mdash;': '—',
  '&lsquo;': '‘',
  '&rsquo;': '’',
  '&sbquo;': '‚',
  '&ldquo;': '“',
  '&rdquo;': '”',
  '&bdquo;': '„',
  '&dagger;': '†',
  '&Dagger;': '‡',
  '&bull;': '•',
  '&hellip;': '…',
  '&permil;': '‰',
  '&prime;': '′',
  '&Prime;': '″',
  '&lsaquo;': '‹',
  '&rsaquo;': '›',
  '&oline;': '‾',
  '&euro;': '€',
  '&trade;': '™',
  '&larr;': '←',
  '&uarr;': '↑',
  '&rarr;': '→',
  '&darr;': '↓',
  '&harr;': '↔',
  '&crarr;': '↵',
  '&lceil;': '⌈',
  '&rceil;': '⌉',
  '&lfloor;': '⌊',
  '&rfloor;': '⌋',
  '&loz;': '◊',
  '&spades;': '♠',
  '&clubs;': '♣',
  '&hearts;': '♥',
  '&diams;': '♦',
};

/**
 * 转换特殊字符
 * @param  {String} str 待转换字符串
 * @return {String}     转换后的字符串
 */
const transform = (str) => {
  for (let code in codeMap) {
    str = str.replace(new RegExp(code, 'g'), codeMap[code]);
  }
  return str;
};

module.exports = {
  transform
}
